DPCalendar=window.DPCalendar||{},function(t,a,e){"use strict";e.Map={},e.Map.create=function(t){if("undefined"!=typeof L){var e=t.dataset,n=L.map(t,{attributionControl:!0}).setView([e.latitude?e.latitude:47,e.longitude?e.longitude:4],e.zoom?e.zoom:4);return n.attributionControl.setPrefix(""),n.attributionControl.addAttribution(a.getOptions("DPCalendar.map.tiles.attribution")),L.tileLayer(a.getOptions("DPCalendar.map.tiles.url"),{id:"mapbox.streets"}).addTo(n),n.dpBounds=new L.latLngBounds,n.dpMarkers=[],(n.dpElement=t).dpmap=n}},e.Map.createMarker=function(t,e,n){var a=e.latitude,r=e.longitude;if(null!=a&&""!=a){e.color||(e.color="000000");var o={draggable:null!=n};o.icon=L.divIcon({className:"dp-location-marker",html:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512"><path fill="#'+String(e.color).replace("#","")+'" d="M172.268 501.67C26.97 291.031 0 269.413 0 192 0 85.961 85.961 0 192 0s192 85.961 192 192c0 77.413-26.97 99.031-172.268 309.67-9.535 13.774-29.93 13.773-39.464 0zM192 272c44.183 0 80-35.817 80-80s-35.817-80-80-80-80 35.817-80 80 35.817 80 80 80z"/></svg>',iconSize:[25,30],iconAnchor:[10,35]});var d=L.marker([a,r],o);d.addTo(t);var i=e.description?e.description:e.title;if(i){var l=d.bindPopup(i);d.on("click",function(t){l.openPopup()})}return n&&d.on("dragend",function(t){n(t.target.getLatLng().lat,t.target.getLatLng().lng)}),t.dpMarkers.push(d),t.dpBounds.extend(d.getLatLng()),t.panTo(t.dpBounds.getCenter()),d}},e.Map.clearMarkers=function(t){if(null!=t&&null!=t.dpMarkers){for(var e=0;e<t.dpMarkers.length;e++)t.removeLayer(t.dpMarkers[e]);t.dpMarkers=[],t.dpBounds=new L.latLngBounds;var n=t.dpElement.dataset;t.panTo([n.latitude?n.latitude:47,n.longitude?n.longitude:4])}},e.Map.moveMarker=function(e,n,t,a){n&&(n.setLatLng([t,a]),e.dpBounds=new L.latLngBounds,e.dpMarkers.forEach(function(t){e.dpBounds.extend(n.getLatLng())}),e.panTo(e.dpBounds.getCenter()))},e.Map.drawCircle=function(t,e,n,a){"mile"==a&&(n*=1.60934),t.dpMarkers.push(L.circle([e.latitude,e.longitude],1e3*n).addTo(t)),t.dpMarkers.push(L.circleMarker([e.latitude,e.longitude],{radius:10,color:"#000000",fillColor:"#000000",fillOpacity:1}).addTo(t)),t.panTo([e.latitude,e.longitude])}}(document,Joomla,DPCalendar);
