DPCalendar=window.DPCalendar||{},function(n,r){"use strict";r.autocomplete={},r.autocomplete.create=function(a){a.addEventListener("keydown",function(e){var t=e.keyCode,l=a.parentElement.querySelector(".dp-autocomplete");if(l)var o=l.querySelector(".dp-autocomplete__result_selected");13===t&&o&&o.click(),27!==t&&9!==t||!l||(r.slideToggle(l),l.parentElement.removeChild(l)),40===t&&o&&o.nextElementSibling&&(o.classList.remove("dp-autocomplete__result_selected"),o.nextElementSibling.classList.add("dp-autocomplete__result_selected"),l.scrollTop=o.offsetTop),38===t&&o&&o.previousElementSibling&&(o.classList.remove("dp-autocomplete__result_selected"),o.previousElementSibling.classList.add("dp-autocomplete__result_selected"),l.scrollTop=o.offsetTop-30)}),a.addEventListener("keyup",r.debounce(function(e){var t=a.getAttribute("data-max-length")?a.getAttribute("data-max-length"):3;if(!([13,27,38,40].includes(e.keyCode)||a.value.trim().length<t)){var l=n.createEvent("CustomEvent");l.initCustomEvent("dp-autocomplete-change"),a.dispatchEvent(l)}})),a.setAttribute("data-autocomplete",!0)},r.autocomplete.setItems=function(o,e){var a=o.parentElement.querySelector(".dp-autocomplete");a&&a.items==e||(a&&a.parentElement.removeChild(a),0!=e.length&&((a=n.createElement("div")).items=e,a.classList.add("dp-autocomplete"),o.parentElement.appendChild(a),e.forEach(function(l,e){var t=n.createElement("a");t.href="#",t.innerHTML="<strong>"+l.title+"</strong> <span>"+l.details+"</span>",t.classList.add("dp-autocomplete__result"),l.title==o.value&&t.classList.add("dp-autocomplete__result_selected"),t.addEventListener("click",function(e){e.preventDefault(),o.value=l.title;var t=n.createEvent("CustomEvent");return t.initCustomEvent("dp-autocomplete-select",!1,!1,l),o.dispatchEvent(t),a.parentElement.removeChild(a),!1}),a.appendChild(t)}),e&&!a.querySelector(".dp-autocomplete__result_selected")&&a.querySelector(".dp-autocomplete__result").classList.add("dp-autocomplete__result_selected"),r.slideToggle(a,function(){a.scrollTop=a.querySelector(".dp-autocomplete__result_selected").offsetTop}),new Popper(o,a,{placement:"bottom-start",modifiers:{autoSizing:{enabled:!0,fn:function(e){return e.styles.width=e.offsets.reference.width,e},order:840}}})))};var e=function(e){if(!e.target||e.target.getAttribute("data-autocomplete")||e.target.closest(".dp-autocomplete"))return!0;var t=n.querySelector(".dp-autocomplete");return t&&(r.slideToggle(t),t.parentElement&&t.parentElement.removeChild(t)),!0};n.addEventListener("touchstart",e),n.addEventListener("mousedown",e)}(document,DPCalendar);
