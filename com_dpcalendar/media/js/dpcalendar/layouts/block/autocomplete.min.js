DPCalendar=window.DPCalendar||{},function(a,r){"use strict";r.autocomplete={},r.autocomplete.create=function(n){n.addEventListener("keydown",function(e){var t=e.keyCode,l=n.parentElement.querySelector(".dp-autocomplete");if(l)var o=l.querySelector(".dp-autocomplete__result_selected");13===t&&o&&o.click(),27!==t&&9!==t||!l||(r.slideToggle(l),l.parentElement.removeChild(l)),40===t&&o&&o.nextElementSibling&&(o.classList.remove("dp-autocomplete__result_selected"),o.nextElementSibling.classList.add("dp-autocomplete__result_selected"),l.scrollTop=o.offsetTop),38===t&&o&&o.previousElementSibling&&(o.classList.remove("dp-autocomplete__result_selected"),o.previousElementSibling.classList.add("dp-autocomplete__result_selected"),l.scrollTop=o.offsetTop-30)}),n.addEventListener("keyup",r.debounce(function(e){var t=n.getAttribute("data-max-length")?n.getAttribute("data-max-length"):3;[13,27,38,40].includes(e.keyCode)||n.value.trim().length<t||n.dispatchEvent(new CustomEvent("dp-autocomplete-change"))})),n.addEventListener("blur",function(e){if(e.relatedTarget&&e.relatedTarget.classList.contains("dp-autocomplete__result"))return!0;var t=e.target.parentElement.querySelector(".dp-autocomplete");if(!t)return!0;r.slideToggle(t),t.parentElement.removeChild(t)})},r.autocomplete.setItems=function(o,e){var n=o.parentElement.querySelector(".dp-autocomplete");n&&n.items==e||(n&&n.parentElement.removeChild(n),0!=e.length&&((n=a.createElement("div")).items=e,n.classList.add("dp-autocomplete"),o.parentElement.appendChild(n),e.forEach(function(t,e){var l=a.createElement("a");l.href="#",l.innerHTML="<strong>"+t.title+"</strong> <span>"+t.details+"</span>",l.classList.add("dp-autocomplete__result"),t.title==o.value&&l.classList.add("dp-autocomplete__result_selected"),l.addEventListener("click",function(e){return e.preventDefault(),o.value=t.title,o.dispatchEvent(new CustomEvent("dp-autocomplete-select",{detail:t})),n.parentElement.removeChild(n),!1}),n.appendChild(l)}),e&&!n.querySelector(".dp-autocomplete__result_selected")&&n.querySelector(".dp-autocomplete__result").classList.add("dp-autocomplete__result_selected"),r.slideToggle(n,function(){n.scrollTop=n.querySelector(".dp-autocomplete__result_selected").offsetTop}),new Popper(o,n,{placement:"bottom-start",modifiers:{autoSizing:{enabled:!0,fn:function(e){return e.styles.width=e.offsets.reference.width,e},order:840}}})))}}(document,DPCalendar);
