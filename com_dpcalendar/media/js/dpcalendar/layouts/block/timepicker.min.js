!function(m,o){"use strict";m.addEventListener("DOMContentLoaded",function(){[].slice.call(m.querySelectorAll(".dp-timepicker")).forEach(function(e){var i=e.getAttribute("data-format"),t=moment(e.getAttribute("data-time"),"HH:mm");e.value=t.format(i),e.setAttribute("data-max-length",0),o.autocomplete.create(e);var a=moment(t);if(a.set("hour",0),a.set("minute",0),a.set("second",0),e.getAttribute("data-min-time")){var n=e.getAttribute("data-min-time").split(":");a.set("hour",n[0]),a.set("minute",n[0])}var r=moment(t);if(r.set("hour",23),r.set("minute",59),r.set("second",0),e.getAttribute("data-max-time")){n=e.getAttribute("data-max-time").split(":");r.set("hour",n[0]),r.set("minute",n[0])}for(var u=[];a<r;)u.push({title:a.format(i),details:""}),a.add(e.getAttribute("data-step"),"minute");e.addEventListener("dp-autocomplete-change",function(){o.autocomplete.setItems(e,u)}),e.addEventListener("dp-autocomplete-select",function(){var t=m.createEvent("HTMLEvents");t.initEvent("change"),e.dispatchEvent(t)}),e.addEventListener("change",function(t){var e=m.getElementById("jform_"+t.target.getAttribute("data-pair"));if(!e||!t.target.actualDate)return!0;var a=moment.utc(t.target.value,i).diff(moment.utc(t.target.actualDate,i)),n=moment.utc(e.value,i);n.add(a,"ms"),e.value=n.format(i),t.target.actualDate=t.target.value}),e.actualDate=e.value,e.addEventListener("mousedown",function(){e.nextElementSibling||(o.autocomplete.setItems(e,u),o.slideToggle(e.nextElementSibling))})})})}(document,DPCalendar);
