!function(m,o){"use strict";m.addEventListener("DOMContentLoaded",function(){[].slice.call(m.querySelectorAll(".dp-timepicker")).forEach(function(a){var i=a.getAttribute("data-format"),t=moment(a.getAttribute("data-time"),"HH:mm");a.value=t.format(i),a.setAttribute("data-max-length",0),o.autocomplete.create(a);var e=moment(t);if(e.set("hour",0),e.set("minute",0),e.set("second",0),a.getAttribute("data-min-time")){var n=a.getAttribute("data-min-time").split(":");e.set("hour",n[0]),e.set("minute",n[0])}var r=moment(t);if(r.set("hour",23),r.set("minute",59),r.set("second",0),a.getAttribute("data-max-time")){n=a.getAttribute("data-max-time").split(":");r.set("hour",n[0]),r.set("minute",n[0])}for(var u=[];e<r;)u.push({title:e.format(i),details:""}),e.add(a.getAttribute("data-step"),"minute");a.addEventListener("dp-autocomplete-change",function(t){o.autocomplete.setItems(a,u)}),a.addEventListener("dp-autocomplete-select",function(t){var e=m.createEvent("HTMLEvents");e.initEvent("change"),a.dispatchEvent(e)}),a.addEventListener("change",function(t){var e=m.getElementById("jform_"+t.target.getAttribute("data-pair"));if(!e||!t.target.actualDate)return!0;var a=moment.utc(t.target.value,i).diff(moment.utc(t.target.actualDate,i)),n=moment.utc(e.value,i);n.add(a,"ms"),e.value=n.format(i),t.target.actualDate=t.target.value}),a.actualDate=a.value,a.addEventListener("mousedown",function(t){a.nextElementSibling||(o.autocomplete.setItems(a,u),o.slideToggle(a.nextElementSibling))})})})}(document,DPCalendar);
